<app-loader></app-loader>
<div class="container-fluid breadcrumbBox py-2">
  <div class="row align-items-center">
    <div class="col-md-6">
      <h3>Defaulter College</h3>
    </div>
    <div class="col-md-6 d-flex justify-content-end">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
          <li class="breadcrumb-item active" aria-current="page">Defaulter College</li>
        </ol>
      </nav>
    </div>
  </div>
</div>
<div class="container-fluid mainContents">


  <div class="card mb-0">
    <div class="card-header">
      <b><i class="bi bi-table"></i> Defaulter College List </b>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-sm-3 searchbox">
          <i class="bi bi-search search"></i>
          <input type="text" class="form-control" placeholder="Search Here" [(ngModel)]="searchText" id="txtsearchText" name="txtsearchText" />

        </div>
      </div>
    </div>
    <div class="table-responsive" style="height: calc(100vh - 250px) !important;">
      <table class="table table-hover table-striped-columns">
        <thead>
          <tr>
            <th>Action</th>
            <th>Sr. No.</th>
            <th>Have you ever applied on NOC portal</th>
            <th>क्या आप PNOC प्राप्त हैं</th>
            <th>Last Application Number</th>
            <th>Submitted Application Date</th>
            <th>College Name</th>

          </tr>
        </thead>
        <tbody *ngIf="DefaulterCollegeListData !=null && DefaulterCollegeListData.length>0">

          <tr *ngFor="let row of DefaulterCollegeListData  | tableSearchFilter:searchText; let idx=index;">
            <td>
              <button type="button" class="btn btn-sm btn-primary" title="View Details" (click)="ViewDetails(mymodaldetails,row.RequestID)"><i class="fa fa-eye"></i></button>
              <button type="button" class="btn btn-sm btn-info" title="Add Penalty" (click)="OpenPenaltyModel(Penaltymodel,row.RequestID)"><i class="fa fa-edit"></i></button>
            </td>
            <td>{{idx+1}}</td>
            <td>{{row.EverAppliedNOC}}</td>
            <td>{{row.IsPNOC}}</td>
            <td>{{row.LastApplicationNo}}</td>
            <td>{{row.LastApplicationSubmittedDate}}</td>
            <td>{{row.CollegeName}}</td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>


</div>
<!--model-->
<ng-template #mymodaldetails let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-applynocpayment-title" style="font-size: 17px; font-weight: 600 !important;">
      Defaulter College Request Details
    </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <i class="fa fa-close"></i>
    </button>
  </div>
  <div class="modal-body">
    <app-loader></app-loader>
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <b>Personal Detail</b>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
            <label for="ddlEverAppliedNOC" class="form-label">Have you ever applied on NOC portal/क्या आपने कभी NOC पोर्टल पर आवेदन किया है? </label>
            <input class="form-control" id="ddlEverAppliedNOC" name="ddlEverAppliedNOC" disabled [(ngModel)]="DefaulterCollegeDetailsData.EverAppliedNOC">
          </div>
          <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-3" *ngIf="DefaulterCollegeDetailsData.EverAppliedNOC=='Yes'">
            <label for="txtLastApplicationNo" class="form-label">Last Application Number </label>
            <input class="form-control" id="txtLastApplicationNo" name="txtLastApplicationNo" disabled [(ngModel)]="DefaulterCollegeDetailsData.LastApplicationNo">
          </div>
          <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-3" *ngIf="DefaulterCollegeDetailsData.EverAppliedNOC=='Yes'">
            <label for="txtLastApplicationSubmittedDate" class="form-label">Submitted Application Date </label>
            <input class="form-control" id="txtLastApplicationSubmittedDate" name="txtLastApplicationSubmittedDate" disabled [(ngModel)]="DefaulterCollegeDetailsData.LastApplicationSubmittedDate">
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
            <label for="ddlIsPNOC" class="form-label">क्या आप PNOC प्राप्त हैं? </label>
            <input class="form-control" id="ddlIsPNOC" name="ddlIsPNOC" disabled [(ngModel)]="DefaulterCollegeDetailsData.IsPNOC">
          </div>

          <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3" *ngIf="DefaulterCollegeDetailsData.IsPNOC=='Yes'">
            <label for="ddlCaseOperatedTNOCLevel" class="form-label">क्या आपका कोई प्रकरण TNOC स्तर में संचालित है? </label>
            <input class="form-control" id="ddlCaseOperatedTNOCLevel" name="ddlCaseOperatedTNOCLevel" disabled [(ngModel)]="DefaulterCollegeDetailsData.CaseOperatedTNOCLevel">
          </div>
          <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3" *ngIf="DefaulterCollegeDetailsData.IsPNOC=='Yes'||DefaulterCollegeDetailsData.IsPNOC=='No'">
            <label for="ddlLastSessionOfTNOCID" class="form-label">अनापत्ति प्राप्त संचालित विषयों की TNOC का अन्तिम सत्र क्या है? </label>
            <input class="form-control" id="ddlLastSessionOfTNOCID" name="ddlLastSessionOfTNOCID" disabled [(ngModel)]="DefaulterCollegeDetailsData.LastSessionOfTNOC">

          </div>

          <div class="row" *ngIf="DefaulterCollegeDetailsData.EverAppliedNOC=='No'">
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="txtCollegeNameEn" maxlength="200" class="form-label">College Name</label>
              <input class="form-control" id="txtCollegeNameEn" name="txtCollegeNameEn" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegeName">
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlDivisionID" class="form-label">Division </label>
              <input class="form-control" id="ddlDivisionID" name="ddlDivisionID" disabled [(ngModel)]="DefaulterCollegeDetailsData.DivisionName">
            </div>


            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="txtCollegeNameHi" maxlength="200" class="form-label">College Name in Hindi </label>
              <input class="form-control" id="txtCollegeNameHi" name="txtCollegeNameHi" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegeNameHi">
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlDistrictID" class="form-label">District </label>
              <input class="form-control" id="ddlDistrictID" name="ddlDistrictID" disabled [(ngModel)]="DefaulterCollegeDetailsData.DistrictName">
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="txtEmail" class="form-label">College Email Address </label>
              <input class="form-control" id="txtEmail" name="txtEmail" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegeEmail">
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="txtMobileNumber" class="form-label">College Mobile Number </label>
              <input class="form-control" id="txtMobileNumber" name="txtMobileNumber" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegeMobileNo">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlCollegeTypeID" class="form-label">Select College Type </label>
              <input class="form-control" id="ddlCollegeTypeID" name="ddlCollegeTypeID" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegeType">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlUniversityID" class="form-label">
                University Name
              </label>
              <input class="form-control" id="ddlUniversityID" name="ddlUniversityID" disabled [(ngModel)]="DefaulterCollegeDetailsData.UniversityName">
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlPresentCollegeStatus" class="form-label">Present Status of College </label>
              <input class="form-control" id="ddlPresentCollegeStatus" name="ddlPresentCollegeStatus" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegePresentStatus">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlCollegeLevelID" class="form-label">College Level </label>
              <input class="form-control" id="ddlCollegeLevelID" name="ddlCollegeLevelID" disabled [(ngModel)]="DefaulterCollegeDetailsData.CollegeLevel">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label for="ddlEstablishmentYearID" class="form-label">Establishment Year</label>
              <input class="form-control" id="ddlEstablishmentYearID" name="ddlEstablishmentYearID" disabled [(ngModel)]="DefaulterCollegeDetailsData.EstablishmentYear">
            </div>

          </div>

          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label class="form-label">First Noc(Only pdf/image file.)(Min.Size 500KB)(Max.Size 2MB):</label>
              <div class="clearfix"></div>
              <a class="bi bi-file-earmark-pdf-fill" *ngIf="DefaulterCollegeDetailsData.FirstNOCDocPath.includes('.pdf')" data-fancybox="gallery" href="{{DefaulterCollegeDetailsData.FirstNOCDocPath}}" data-caption="Image 10" title="click here to zoom" style="font-size:25px"></a>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label class="form-label">Last Noc(Only pdf/image file.)(Min.Size 500KB)(Max.Size 2MB):</label>
              <div class="clearfix"></div>
              <a class="bi bi-file-earmark-pdf-fill" *ngIf="DefaulterCollegeDetailsData.LastNOCDocPath.includes('.pdf')" data-fancybox="gallery" href="{{DefaulterCollegeDetailsData.LastNOCDocPath}}" data-caption="Image 10" title="click here to zoom" style="font-size:25px"></a>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label class="form-label">Latest Affiliation of University/Proof of Latest Affiliation(Only pdf/image file.)(Min.Size 500KB)(Max.Size 2MB):</label>
              <div class="clearfix"></div>
              <a class="bi bi-file-earmark-pdf-fill" *ngIf="DefaulterCollegeDetailsData.LatestAffiliationDocPath.includes('.pdf')" data-fancybox="gallery" href="{{DefaulterCollegeDetailsData.LatestAffiliationDocPath}}" data-caption="Image 10" title="click here to zoom" style="font-size:25px"></a>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label class="form-label">Result of session 2022-23(copy of TR of first year university result of each course running in college)(Only pdf/image file.)(Min.Size 500KB)(Max.Size 2MB):</label>
              <div class="clearfix"></div>
              <a class="bi bi-file-earmark-pdf-fill" *ngIf="DefaulterCollegeDetailsData.ResultLastSessionDocPath.includes('.pdf')" data-fancybox="gallery" href="{{DefaulterCollegeDetailsData.ResultLastSessionDocPath}}" data-caption="Image 10" title="click here to zoom" style="font-size:25px"></a>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mb-3">
              <label class="form-label">Proof of Examinations form filled by students for session 2023-24(Only pdf/image file.)(Min.Size 500KB)(Max.Size 2MB):</label>
              <div class="clearfix"></div>
              <a class="bi bi-file-earmark-pdf-fill" *ngIf="DefaulterCollegeDetailsData.LastSessionProofOfExaminationDocPath.includes('.pdf')" data-fancybox="gallery" href="{{DefaulterCollegeDetailsData.LastSessionProofOfExaminationDocPath}}" data-caption="Image 10" title="click here to zoom" style="font-size:25px"></a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #Penaltymodel let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-applynocpayment-title" style="font-size: 17px; font-weight: 600 !important;">
      Add Defaulter College Penalty
    </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <i class="fa fa-close"></i>
    </button>
  </div>
  <div class="modal-body">
    <app-loader></app-loader>
    <div class="row">
      <div class="col-12">
        <label for="txtRemark" class="form-label">Penalty for(Narration)<span style="color:red;">*</span></label>
        <textarea id="txtRemark" class="form-control" [(ngModel)]="requestPenalty.Penaltyfor"></textarea>
        <p *ngIf="FormSubmit&&requestPenalty.Penaltyfor==''" class="text-danger"><i aria-hidden="true"></i> This field is required .!</p>
      </div>
      <div class="col-12">
        <label for="txtPenaltyamount" class="form-label">Penalty Amount<span style="color:red;">*</span></label>
        <input autocomplete="off" type="text" maxlength="10" [(ngModel)]="requestPenalty.PenaltyAmount" class="form-control" id="txtPenaltyamount" name="txtPenaltyamount" (keypress)="numberOnly($event)">
        <p *ngIf="FormSubmit&& requestPenalty.PenaltyAmount.toString()==''" class="text-danger"><i aria-hidden="true"></i> This field is required .!</p>
        <p *ngIf="FormSubmit&& requestPenalty.PenaltyAmount==0" class="text-danger"><i aria-hidden="true"></i> Penalty Amount grater then zero .!</p>
      </div>
      <div class="col-12 text-end mt-4">
        <button type="submit" id="btnPenaltySave" (click)="SaveData()" class="btn btn-success"> Save</button>
        &nbsp;<button type="submit" (click)="Reset()" class="btn btn-secondary"> Cancel</button>
      </div>
    </div>


    <div class="table-responsive">
      <table class="table table-hover table-striped-columns">
        <thead>
          <tr>
            <th style="width:5%">Sr. No.</th>
            <th>Penalty for</th>
            <th>Penalty Amount</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of DefaulterCollegePenaltyList; let idx=index;">
            <td>{{idx+1}}</td>
            <td>{{row.Penaltyfor}}</td>
            <td>{{row.PenaltyAmount}}</td>
            <td>
              <button type="submit" (click)="EditDefaulterCollegePenalty(row.PenaltyID)" class="btn btn-sm btn-info"><i class="fa fa-edit"></i></button>
              <button type="submit" (click)="DeleteDefaulterCollegePenalty(row.PenaltyID)" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i></button>
            </td>
          </tr>
          <tr *ngIf="DefaulterCollegePenaltyList.length==0">
            <td colspan="10" class="text-center text-danger">No Data Found!</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</ng-template>
